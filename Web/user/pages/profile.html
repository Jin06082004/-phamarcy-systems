<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Th√¥ng tin t√†i kho·∫£n - DrugStore</title>
  <link rel="stylesheet" href="../css/dashboard.css" />
  <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet" />
  <style>
    .profile-container {
      max-width: 1200px;
      margin: 2rem auto;
      padding: 0 1rem;
    }

    .profile-header {
      background: linear-gradient(135deg, #10b981 0%, #059669 100%);
      color: white;
      padding: 3rem 2rem;
      border-radius: 20px;
      text-align: center;
      box-shadow: 0 10px 30px rgba(16, 185, 129, 0.3);
      margin-bottom: 2rem;
    }

    .profile-avatar {
      width: 120px;
      height: 120px;
      background: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 4rem;
      margin: 0 auto 1rem;
      box-shadow: 0 8px 24px rgba(0,0,0,0.15);
    }

    .profile-name {
      font-size: 2rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
    }

    .profile-role {
      font-size: 1rem;
      opacity: 0.9;
      display: inline-block;
      padding: 0.5rem 1.5rem;
      background: rgba(255,255,255,0.2);
      border-radius: 20px;
      font-weight: 600;
    }

    .profile-content {
      display: grid;
      grid-template-columns: 300px 1fr;
      gap: 2rem;
    }

    .profile-sidebar {
      background: white;
      border-radius: 16px;
      padding: 1.5rem;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      height: fit-content;
    }

    .sidebar-menu {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .sidebar-menu li {
      margin-bottom: 0.5rem;
    }

    .sidebar-menu a {
      display: flex;
      align-items: center;
      gap: 1rem;
      padding: 1rem 1.25rem;
      color: #374151;
      text-decoration: none;
      border-radius: 12px;
      transition: all 0.3s;
      font-weight: 500;
    }

    .sidebar-menu a:hover {
      background: #f3f4f6;
      transform: translateX(5px);
    }

    .sidebar-menu a.active {
      background: linear-gradient(135deg, #10b981 0%, #059669 100%);
      color: white;
      box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
    }

    .sidebar-menu i {
      font-size: 1.5rem;
    }

    .profile-main {
      background: white;
      border-radius: 16px;
      padding: 2rem;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }

    .section-title {
      font-size: 1.5rem;
      font-weight: 700;
      color: #1f2937;
      margin-bottom: 1.5rem;
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }

    .section-title i {
      color: #10b981;
    }

    .form-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1.5rem;
      margin-bottom: 1.5rem;
    }

    .form-group {
      display: flex;
      flex-direction: column;
    }

    .form-group.full-width {
      grid-column: 1 / -1;
    }

    .form-label {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-weight: 600;
      color: #374151;
      margin-bottom: 0.5rem;
      font-size: 0.95rem;
    }

    .form-label i {
      color: #10b981;
      font-size: 1.25rem;
    }

    .form-input {
      padding: 0.875rem 1rem;
      border: 2px solid #e5e7eb;
      border-radius: 10px;
      font-size: 1rem;
      transition: all 0.3s;
    }

    .form-input:focus {
      outline: none;
      border-color: #10b981;
      box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
    }

    .form-input:disabled {
      background: #f9fafb;
      cursor: not-allowed;
    }

    textarea.form-input {
      resize: vertical;
      min-height: 100px;
      font-family: inherit;
    }

    .btn-group {
      display: flex;
      gap: 1rem;
      justify-content: flex-end;
      margin-top: 2rem;
    }

    .btn {
      padding: 0.875rem 2rem;
      border: none;
      border-radius: 10px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .btn-primary {
      background: linear-gradient(135deg, #10b981 0%, #059669 100%);
      color: white;
      box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(16, 185, 129, 0.4);
    }

    .btn-secondary {
      background: white;
      color: #374151;
      border: 2px solid #e5e7eb;
    }

    .btn-secondary:hover {
      background: #f9fafb;
    }

    .address-list {
      display: grid;
      gap: 1rem;
      margin-bottom: 1.5rem;
    }

    .address-card {
      border: 2px solid #e5e7eb;
      border-radius: 12px;
      padding: 1.5rem;
      position: relative;
      transition: all 0.3s;
    }

    .address-card:hover {
      border-color: #10b981;
      box-shadow: 0 4px 12px rgba(16, 185, 129, 0.1);
    }

    .address-card.default {
      border-color: #10b981;
      background: linear-gradient(135deg, rgba(16, 185, 129, 0.05) 0%, rgba(5, 150, 105, 0.05) 100%);
    }

    .address-badge {
      position: absolute;
      top: 1rem;
      right: 1rem;
      background: #10b981;
      color: white;
      padding: 0.25rem 0.75rem;
      border-radius: 20px;
      font-size: 0.75rem;
      font-weight: 600;
    }

    .address-info {
      margin-bottom: 1rem;
    }

    .address-name {
      font-weight: 700;
      font-size: 1.1rem;
      color: #1f2937;
      margin-bottom: 0.5rem;
    }

    .address-details {
      color: #6b7280;
      line-height: 1.6;
    }

    .address-actions {
      display: flex;
      gap: 0.75rem;
      margin-top: 1rem;
    }

    .btn-small {
      padding: 0.5rem 1rem;
      font-size: 0.875rem;
      border-radius: 8px;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .btn-edit {
      background: #3b82f6;
      color: white;
    }

    .btn-delete {
      background: #ef4444;
      color: white;
    }

    .btn-default {
      background: #10b981;
      color: white;
    }

    .empty-state {
      text-align: center;
      padding: 3rem;
      color: #9ca3af;
    }

    .empty-state i {
      font-size: 4rem;
      margin-bottom: 1rem;
      opacity: 0.5;
    }

    @media (max-width: 768px) {
      .profile-content {
        grid-template-columns: 1fr;
      }

      .form-grid {
        grid-template-columns: 1fr;
      }

      .profile-header {
        padding: 2rem 1rem;
      }

      .profile-name {
        font-size: 1.5rem;
      }
    }

    /* Modal styles */
    .modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      animation: fadeIn 0.3s ease;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
      }
      to {
        opacity: 1;
      }
    }

    .modal-close:hover {
      background: rgba(255,255,255,0.3) !important;
      transform: rotate(90deg);
    }
  </style>
</head>
<body>
  <div data-include="../../shared/components/topbar.html"></div>
  <div data-include="../../shared/components/navbar.html"></div>

  <main class="content">
    <div class="profile-container">
      <div class="profile-header">
        <div class="profile-avatar">üë§</div>
        <h1 class="profile-name" id="profileName">ƒêang t·∫£i...</h1>
        <span class="profile-role" id="profileRole">User</span>
      </div>

      <div class="profile-content">
        <aside class="profile-sidebar">
          <ul class="sidebar-menu">
            <li>
              <a href="#" class="active" data-tab="info">
                <i class='bx bx-user'></i>
                <span>Th√¥ng tin c√° nh√¢n</span>
              </a>
            </li>
            <li>
              <a href="#" data-tab="address">
                <i class='bx bx-map'></i>
                <span>ƒê·ªãa ch·ªâ giao h√†ng</span>
              </a>
            </li>
            <li>
              <a href="#" data-tab="password">
                <i class='bx bx-lock-alt'></i>
                <span>ƒê·ªïi m·∫≠t kh·∫©u</span>
              </a>
            </li>
            <li>
              <a href="/Web/user/pages/my-orders.html">
                <i class='bx bx-shopping-bag'></i>
                <span>ƒê∆°n h√†ng c·ªßa t√¥i</span>
              </a>
            </li>
          </ul>
        </aside>

        <div class="profile-main">
          <!-- Tab: Th√¥ng tin c√° nh√¢n -->
          <div id="tab-info" class="tab-content">
            <h2 class="section-title">
              <i class='bx bx-user-circle'></i>
              Th√¥ng tin c√° nh√¢n
            </h2>
            
            <form id="profileForm">
              <div class="form-grid">
                <div class="form-group">
                  <label class="form-label">
                    <i class='bx bx-user'></i>
                    T√™n ƒëƒÉng nh·∫≠p
                  </label>
                  <input type="text" class="form-input" id="username" disabled />
                </div>

                <div class="form-group">
                  <label class="form-label">
                    <i class='bx bx-id-card'></i>
                    H·ªç v√† t√™n
                  </label>
                  <input type="text" class="form-input" id="fullName" placeholder="Nguy·ªÖn VƒÉn A" />
                </div>

                <div class="form-group">
                  <label class="form-label">
                    <i class='bx bx-envelope'></i>
                    Email
                  </label>
                  <input type="email" class="form-input" id="email" placeholder="email@example.com" />
                </div>

                <div class="form-group">
                  <label class="form-label">
                    <i class='bx bx-phone'></i>
                    S·ªë ƒëi·ªán tho·∫°i
                  </label>
                  <input type="tel" class="form-input" id="phone" placeholder="0912345678" />
                </div>

                <div class="form-group full-width">
                  <label class="form-label">
                    <i class='bx bx-map'></i>
                    ƒê·ªãa ch·ªâ
                  </label>
                  <textarea class="form-input" id="address" placeholder="ƒê·ªãa ch·ªâ chi ti·∫øt..."></textarea>
                </div>
              </div>

              <div class="btn-group">
                <button type="button" class="btn btn-secondary" onclick="loadUserData()">
                  <i class='bx bx-revision'></i>
                  H·ªßy thay ƒë·ªïi
                </button>
                <button type="submit" class="btn btn-primary">
                  <i class='bx bx-save'></i>
                  L∆∞u thay ƒë·ªïi
                </button>
              </div>
            </form>
          </div>

          <!-- Tab: ƒê·ªãa ch·ªâ giao h√†ng -->
          <div id="tab-address" class="tab-content" style="display: none;">
            <h2 class="section-title">
              <i class='bx bx-map-pin'></i>
              ƒê·ªãa ch·ªâ giao h√†ng
            </h2>

            <div id="addressList" class="address-list">
              <div class="empty-state">
                <i class='bx bx-map'></i>
                <p>Ch∆∞a c√≥ ƒë·ªãa ch·ªâ giao h√†ng</p>
              </div>
            </div>

            <button class="btn btn-primary" onclick="openAddressModal()">
              <i class='bx bx-plus'></i>
              Th√™m ƒë·ªãa ch·ªâ m·ªõi
            </button>
          </div>

          <!-- Tab: ƒê·ªïi m·∫≠t kh·∫©u -->
          <div id="tab-password" class="tab-content" style="display: none;">
            <h2 class="section-title">
              <i class='bx bx-lock-open'></i>
              ƒê·ªïi m·∫≠t kh·∫©u
            </h2>

            <form id="passwordForm">
              <div class="form-grid">
                <div class="form-group full-width">
                  <label class="form-label">
                    <i class='bx bx-lock'></i>
                    M·∫≠t kh·∫©u hi·ªán t·∫°i
                  </label>
                  <input type="password" class="form-input" id="currentPassword" required />
                </div>

                <div class="form-group">
                  <label class="form-label">
                    <i class='bx bx-lock-alt'></i>
                    M·∫≠t kh·∫©u m·ªõi
                  </label>
                  <input type="password" class="form-input" id="newPassword" required />
                </div>

                <div class="form-group">
                  <label class="form-label">
                    <i class='bx bx-check-circle'></i>
                    X√°c nh·∫≠n m·∫≠t kh·∫©u m·ªõi
                  </label>
                  <input type="password" class="form-input" id="confirmPassword" required />
                </div>
              </div>

              <div class="btn-group">
                <button type="button" class="btn btn-secondary" onclick="document.getElementById('passwordForm').reset()">
                  <i class='bx bx-x'></i>
                  H·ªßy
                </button>
                <button type="submit" class="btn btn-primary">
                  <i class='bx bx-key'></i>
                  ƒê·ªïi m·∫≠t kh·∫©u
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </main>

  <div data-include="../../shared/components/footer.html"></div>

  <!-- Modal th√™m/s·ª≠a ƒë·ªãa ch·ªâ -->
  <div id="addressModal" class="modal" style="display: none;">
    <div class="modal-content" style="max-width: 650px; border-radius: 16px; overflow: hidden; box-shadow: 0 20px 60px rgba(0,0,0,0.3); background: white;">
      <div class="modal-header" style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); padding: 24px 32px; display: flex; justify-content: space-between; align-items: center; border: none;">
        <h2 id="addressModalTitle" style="color: white; font-size: 24px; font-weight: 600; display: flex; align-items: center; gap: 12px; margin: 0;">
          <i class='bx bx-map-pin' style="font-size: 28px;"></i>
          Th√™m ƒë·ªãa ch·ªâ m·ªõi
        </h2>
        <button class="modal-close" onclick="closeAddressModal()" style="background: rgba(255,255,255,0.2); color: white; border: none; font-size: 28px; width: 40px; height: 40px; border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.3s ease;">&times;</button>
      </div>
      
      <form id="addressForm" style="padding: 32px; background: white;">
        <input type="hidden" id="addressId" />
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
          <div class="form-group" style="margin: 0;">
            <label class="form-label" style="display: flex; align-items: center; gap: 8px; font-weight: 600; color: #374151; margin-bottom: 8px; font-size: 14px;">
              <i class='bx bx-user' style="font-size: 20px; color: #10b981;"></i>
              H·ªç v√† t√™n
            </label>
            <input 
              type="text" 
              class="form-input" 
              id="addrFullName" 
              placeholder="VD: Nguy·ªÖn VƒÉn A"
              required 
              style="width: 100%; padding: 12px 14px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px; transition: all 0.3s; box-sizing: border-box; background: white;"
              onfocus="this.style.borderColor='#10b981'; this.style.boxShadow='0 0 0 3px rgba(16,185,129,0.1)'"
              onblur="this.style.borderColor='#e5e7eb'; this.style.boxShadow='none'"
            />
          </div>

          <div class="form-group" style="margin: 0;">
            <label class="form-label" style="display: flex; align-items: center; gap: 8px; font-weight: 600; color: #374151; margin-bottom: 8px; font-size: 14px;">
              <i class='bx bx-phone' style="font-size: 20px; color: #10b981;"></i>
              S·ªë ƒëi·ªán tho·∫°i
            </label>
            <input 
              type="tel" 
              class="form-input" 
              id="addrPhone" 
              placeholder="VD: 0912345678"
              required 
              style="width: 100%; padding: 12px 14px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px; transition: all 0.3s; box-sizing: border-box; background: white;"
              onfocus="this.style.borderColor='#10b981'; this.style.boxShadow='0 0 0 3px rgba(16,185,129,0.1)'"
              onblur="this.style.borderColor='#e5e7eb'; this.style.boxShadow='none'"
            />
          </div>
        </div>

        <div class="form-group" style="margin-bottom: 20px;">
          <label class="form-label" style="display: flex; align-items: center; gap: 8px; font-weight: 600; color: #374151; margin-bottom: 8px; font-size: 14px;">
            <i class='bx bx-map' style="font-size: 20px; color: #10b981;"></i>
            ƒê·ªãa ch·ªâ chi ti·∫øt
          </label>
          <textarea 
            class="form-input" 
            id="addrDetail" 
            rows="3" 
            placeholder="S·ªë nh√†, t√™n ƒë∆∞·ªùng..."
            required
            style="width: 100%; padding: 12px 14px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px; resize: vertical; font-family: inherit; transition: all 0.3s; box-sizing: border-box; background: white;"
            onfocus="this.style.borderColor='#10b981'; this.style.boxShadow='0 0 0 3px rgba(16,185,129,0.1)'"
            onblur="this.style.borderColor='#e5e7eb'; this.style.boxShadow='none'"
          ></textarea>
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 24px;">
          <div class="form-group" style="margin: 0;">
            <label class="form-label" style="display: flex; align-items: center; gap: 8px; font-weight: 600; color: #374151; margin-bottom: 8px; font-size: 14px;">
              <i class='bx bx-buildings' style="font-size: 20px; color: #10b981;"></i>
              T·ªânh/Th√†nh ph·ªë
            </label>
            <select 
              class="form-input" 
              id="addrCity" 
              required 
              style="width: 100%; padding: 12px 14px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px; transition: all 0.3s; box-sizing: border-box; cursor: pointer; background: white;"
              onfocus="this.style.borderColor='#10b981'; this.style.boxShadow='0 0 0 3px rgba(16,185,129,0.1)'"
              onblur="this.style.borderColor='#e5e7eb'; this.style.boxShadow='none'"
            >
              <option value="">-- Ch·ªçn t·ªânh/th√†nh --</option>
            </select>
          </div>

          <div class="form-group" style="margin: 0;">
            <label class="form-label" style="display: flex; align-items: center; gap: 8px; font-weight: 600; color: #374151; margin-bottom: 8px; font-size: 14px;">
              <i class='bx bx-building' style="font-size: 20px; color: #10b981;"></i>
              Qu·∫≠n/Huy·ªán
            </label>
            <select 
              class="form-input" 
              id="addrDistrict" 
              required 
              disabled
              style="width: 100%; padding: 12px 14px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px; transition: all 0.3s; box-sizing: border-box; cursor: pointer; background: white;"
              onfocus="this.style.borderColor='#10b981'; this.style.boxShadow='0 0 0 3px rgba(16,185,129,0.1)'"
              onblur="this.style.borderColor='#e5e7eb'; this.style.boxShadow='none'"
            >
              <option value="">-- Ch·ªçn qu·∫≠n/huy·ªán --</option>
            </select>
          </div>
        </div>

        <div class="form-group" style="margin-bottom: 28px;">
          <label style="display: flex; align-items: center; gap: 10px; cursor: pointer; padding: 12px 16px; background: #f9fafb; border-radius: 10px; transition: all 0.3s; border: 2px solid #e5e7eb;"
            onmouseover="this.style.background='#f3f4f6'; this.style.borderColor='#10b981'"
            onmouseout="this.style.background='#f9fafb'; this.style.borderColor='#e5e7eb'">
            <input type="checkbox" id="addrIsDefault" style="width: 20px; height: 20px; cursor: pointer; accent-color: #10b981;" />
            <span style="font-weight: 600; color: #374151; font-size: 15px;">ƒê·∫∑t l√†m ƒë·ªãa ch·ªâ m·∫∑c ƒë·ªãnh</span>
          </label>
        </div>

        <div style="display: flex; gap: 12px; justify-content: flex-end;">
          <button 
            type="button" 
            class="btn btn-secondary" 
            onclick="closeAddressModal()"
            style="padding: 12px 28px; border-radius: 10px; font-weight: 600; font-size: 15px; cursor: pointer; transition: all 0.3s; border: 2px solid #e5e7eb; background: white; color: #6b7280; display: flex; align-items: center; gap: 8px;"
            onmouseover="this.style.background='#f3f4f6'"
            onmouseout="this.style.background='white'"
          >
            <i class='bx bx-x' style="font-size: 18px;"></i>
            H·ªßy
          </button>
          <button 
            type="submit" 
            class="btn btn-primary"
            style="padding: 12px 28px; border-radius: 10px; font-weight: 600; font-size: 15px; cursor: pointer; transition: all 0.3s; border: none; background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; box-shadow: 0 4px 12px rgba(16,185,129,0.3); display: flex; align-items: center; gap: 8px;"
            onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 20px rgba(16,185,129,0.4)'"
            onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 12px rgba(16,185,129,0.3)'"
          >
            <i class='bx bx-save' style="font-size: 18px;"></i>
            L∆∞u ƒë·ªãa ch·ªâ
          </button>
        </div>
      </form>
    </div>
  </div>

  <script src="../../shared/include.js"></script>
  <script src="../../shared/notification.js"></script>
  <script type="module">
    import { userAPI } from "../../shared/api.js";

    let currentUser = null;
    let addresses = [];
    let editingAddressId = null;

    // D·ªØ li·ªáu 63 t·ªânh/th√†nh ph·ªë Vi·ªát Nam v√† qu·∫≠n/huy·ªán
    const vietnamData = {
      "An Giang": ["TP. Long Xuy√™n", "TP. Ch√¢u ƒê·ªëc", "TX. T√¢n Ch√¢u", "An Ph√∫", "Ch√¢u Ph√∫", "Ch√¢u Th√†nh", "Ch·ª£ M·ªõi", "Ph√∫ T√¢n", "Tho·∫°i S∆°n", "T·ªãnh Bi√™n", "Tri T√¥n"],
      "B√† R·ªãa - V≈©ng T√†u": ["TP. V≈©ng T√†u", "TP. B√† R·ªãa", "TX. Ph√∫ M·ªπ", "Ch√¢u ƒê·ª©c", "C√¥n ƒê·∫£o", "ƒê·∫•t ƒê·ªè", "Long ƒêi·ªÅn", "T√¢n Th√†nh", "Xuy√™n M·ªôc"],
      "B·∫°c Li√™u": ["TP. B·∫°c Li√™u", "TX. Gi√° Rai", "ƒê√¥ng H·∫£i", "H√≤a B√¨nh", "H·ªìng D√¢n", "Ph∆∞·ªõc Long", "Vƒ©nh L·ª£i"],
      "B·∫Øc Giang": ["TP. B·∫Øc Giang", "Hi·ªáp H√≤a", "L·∫°ng Giang", "L·ª•c Nam", "L·ª•c Ng·∫°n", "S∆°n ƒê·ªông", "T√¢n Y√™n", "Vi·ªát Y√™n", "Y√™n D≈©ng", "Y√™n Th·∫ø"],
      "B·∫Øc K·∫°n": ["TP. B·∫Øc K·∫°n", "Ba B·ªÉ", "B·∫°ch Th√¥ng", "Ch·ª£ ƒê·ªìn", "Ch·ª£ M·ªõi", "Na R√¨", "Ng√¢n S∆°n", "P√°c N·∫∑m"],
      "B·∫Øc Ninh": ["TP. B·∫Øc Ninh", "TX. T·ª´ S∆°n", "Gia B√¨nh", "L∆∞∆°ng T√†i", "Qu·∫ø V√µ", "Thu·∫≠n Th√†nh", "Ti√™n Du", "Y√™n Phong"],
      "B·∫øn Tre": ["TP. B·∫øn Tre", "Ba Tri", "B√¨nh ƒê·∫°i", "Ch√¢u Th√†nh", "Ch·ª£ L√°ch", "Gi·ªìng Tr√¥m", "M·ªè C√†y B·∫Øc", "M·ªè C√†y Nam", "Th·∫°nh Ph√∫"],
      "B√¨nh D∆∞∆°ng": ["TP. Th·ªß D·∫ßu M·ªôt", "TP. Thu·∫≠n An", "TP. Dƒ© An", "TX. T√¢n Uy√™n", "TX. B·∫øn C√°t", "B√†u B√†ng", "D·∫ßu Ti·∫øng", "Ph√∫ Gi√°o"],
      "B√¨nh ƒê·ªãnh": ["TP. Quy Nh∆°n", "TX. An Nh∆°n", "TX. Ho√†i Nh∆°n", "An L√£o", "Ho√†i √Çn", "Ph√∫ C√°t", "Ph√∫ M·ªπ", "T√¢y S∆°n", "Tuy Ph∆∞·ªõc", "V√¢n Canh", "Vƒ©nh Th·∫°nh"],
      "B√¨nh Ph∆∞·ªõc": ["TP. ƒê·ªìng Xo√†i", "TX. B√¨nh Long", "TX. Ph∆∞·ªõc Long", "B√π ƒêƒÉng", "B√π ƒê·ªëp", "B√π Gia M·∫≠p", "Ch∆°n Th√†nh", "ƒê·ªìng Ph√∫", "H·ªõn Qu·∫£n", "L·ªôc Ninh", "Ph√∫ Ri·ªÅng"],
      "B√¨nh Thu·∫≠n": ["TP. Phan Thi·∫øt", "TX. La Gi", "B·∫Øc B√¨nh", "ƒê·ª©c Linh", "H√†m Thu·∫≠n B·∫Øc", "H√†m Thu·∫≠n Nam", "H√†m T√¢n", "Ph√∫ Qu√≠", "T√°nh Linh", "Tuy Phong"],
      "C√† Mau": ["TP. C√† Mau", "C√°i N∆∞·ªõc", "ƒê·∫ßm D∆°i", "NƒÉm CƒÉn", "Ng·ªçc Hi·ªÉn", "Ph√∫ T√¢n", "Th·ªõi B√¨nh", "Tr·∫ßn VƒÉn Th·ªùi", "U Minh"],
      "C·∫ßn Th∆°": ["Ninh Ki·ªÅu", "√î M√¥n", "B√¨nh Thu·ª∑", "C√°i RƒÉng", "Th·ªët N·ªët", "Vƒ©nh Th·∫°nh", "C·ªù ƒê·ªè", "Phong ƒêi·ªÅn", "Th·ªõi Lai"],
      "Cao B·∫±ng": ["TP. Cao B·∫±ng", "B·∫£o L·∫°c", "B·∫£o L√¢m", "H√† Qu·∫£ng", "H·∫° Lang", "H√≤a An", "Nguy√™n B√¨nh", "Ph·ª•c H√≤a", "Qu·∫£ng Uy√™n", "Th·∫°ch An", "Th√¥ng N√¥ng", "Tr√† Lƒ©nh", "Tr√πng Kh√°nh"],
      "ƒê√† N·∫µng": ["H·∫£i Ch√¢u", "Thanh Kh√™", "S∆°n Tr√†", "Ng≈© H√†nh S∆°n", "Li√™n Chi·ªÉu", "C·∫©m L·ªá", "H√≤a Vang", "Ho√†ng Sa"],
      "ƒê·∫Øk L·∫Øk": ["TP. Bu√¥n Ma Thu·ªôt", "TX. Bu√¥n H·ªì", "Bu√¥n ƒê√¥n", "C∆∞ Kuin", "C∆∞ M'gar", "Ea H'leo", "Ea Kar", "Ea S√∫p", "Kr√¥ng Ana", "Kr√¥ng B√¥ng", "Kr√¥ng Buk", "Kr√¥ng NƒÉng", "Kr√¥ng P·∫Øc", "L·∫Øk", "M'ƒêr·∫Øk"],
      "ƒê·∫Øk N√¥ng": ["TP. Gia Nghƒ©a", "C√∫ J√∫t", "ƒê·∫Øk Glong", "ƒê·∫Øk Mil", "ƒê·∫Øk R'L·∫•p", "ƒê·∫Øk Song", "Kr√¥ng N√¥", "Tuy ƒê·ª©c"],
      "ƒêi·ªán Bi√™n": ["TP. ƒêi·ªán Bi√™n Ph·ªß", "TX. M∆∞·ªùng Lay", "ƒêi·ªán Bi√™n", "ƒêi·ªán Bi√™n ƒê√¥ng", "M∆∞·ªùng ·∫¢ng", "M∆∞·ªùng Ch√†", "M∆∞·ªùng Nh√©", "N·∫≠m P·ªì", "T·ªßa Ch√πa", "Tu·∫ßn Gi√°o"],
      "ƒê·ªìng Nai": ["TP. Bi√™n H√≤a", "TP. Long Kh√°nh", "C·∫©m M·ªπ", "ƒê·ªãnh Qu√°n", "Long Th√†nh", "Nh∆°n Tr·∫°ch", "T√¢n Ph√∫", "Th·ªëng Nh·∫•t", "Tr·∫£ng Bom", "Vƒ©nh C·ª≠u", "Xu√¢n L·ªôc"],
      "ƒê·ªìng Th√°p": ["TP. Cao L√£nh", "TP. Sa ƒê√©c", "TX. H·ªìng Ng·ª±", "Cao L√£nh", "Ch√¢u Th√†nh", "H·ªìng Ng·ª±", "Lai Vung", "L·∫•p V√≤", "Tam N√¥ng", "T√¢n H·ªìng", "Thanh B√¨nh", "Th√°p M∆∞·ªùi"],
      "Gia Lai": ["TP. Pleiku", "TX. An Kh√™", "TX. Ayun Pa", "Ch∆∞ PƒÉh", "Ch∆∞ Pr√¥ng", "Ch∆∞ P∆∞h", "Ch∆∞ S√™", "ƒê·∫Øk ƒêoa", "ƒê·∫Øk P∆°", "ƒê·ª©c C∆°", "Ia Grai", "Ia Pa", "K'Bang", "K√¥ng Chro", "Kr√¥ng Pa", "Mang Yang", "Ph√∫ Thi·ªán"],
      "H√† Giang": ["TP. H√† Giang", "B·∫Øc M√™", "B·∫Øc Quang", "ƒê·ªìng VƒÉn", "Ho√†ng Su Ph√¨", "M√®o V·∫°c", "Qu·∫£n B·∫°", "Qu·∫£ng B√¨nh", "V·ªã Xuy√™n", "X√≠n M·∫ßn", "Y√™n Minh"],
      "H√† Nam": ["TP. Ph·ªß L√Ω", "TX. Duy Ti√™n", "B√¨nh L·ª•c", "Kim B·∫£ng", "L√Ω Nh√¢n", "Thanh Li√™m"],
      "H√† N·ªôi": ["Ba ƒê√¨nh", "Ho√†n Ki·∫øm", "Hai B√† Tr∆∞ng", "ƒê·ªëng ƒêa", "T√¢y H·ªì", "C·∫ßu Gi·∫•y", "Thanh Xu√¢n", "Ho√†ng Mai", "Long Bi√™n", "Nam T·ª´ Li√™m", "B·∫Øc T·ª´ Li√™m", "H√† ƒê√¥ng", "TX. S∆°n T√¢y", "Ba V√¨", "Ch∆∞∆°ng M·ªπ", "ƒêan Ph∆∞·ª£ng", "ƒê√¥ng Anh", "Gia L√¢m", "Ho√†i ƒê·ª©c", "M√™ Linh", "M·ªπ ƒê·ª©c", "Ph√∫ Xuy√™n", "Ph√∫c Th·ªç", "Qu·ªëc Oai", "S√≥c S∆°n", "Th·∫°ch Th·∫•t", "Thanh Oai", "Thanh Tr√¨", "Th∆∞·ªùng T√≠n", "·ª®ng H√≤a"],
      "H√† Tƒ©nh": ["TP. H√† Tƒ©nh", "TX. H·ªìng Lƒ©nh", "TX. K·ª≥ Anh", "C·∫©m Xuy√™n", "Can L·ªôc", "ƒê·ª©c Th·ªç", "H∆∞∆°ng Kh√™", "H∆∞∆°ng S∆°n", "K·ª≥ Anh", "L·ªôc H√†", "Nghi Xu√¢n", "Th·∫°ch H√†", "V≈© Quang"],
      "H·∫£i D∆∞∆°ng": ["TP. H·∫£i D∆∞∆°ng", "TP. Ch√≠ Linh", "TX. Kinh M√¥n", "B√¨nh Giang", "C·∫©m Gi√†ng", "Gia L·ªôc", "Kim Th√†nh", "Nam S√°ch", "Ninh Giang", "Thanh H√†", "Thanh Mi·ªán", "T·ª© K·ª≥"],
      "H·∫£i Ph√≤ng": ["H·ªìng B√†ng", "Ng√¥ Quy·ªÅn", "L√™ Ch√¢n", "H·∫£i An", "Ki·∫øn An", "ƒê·ªì S∆°n", "D∆∞∆°ng Kinh", "An D∆∞∆°ng", "An L√£o", "Ki·∫øn Thu·ªµ", "Ti√™n L√£ng", "Vƒ©nh B·∫£o", "C√°t H·∫£i", "B·∫°ch Long Vƒ©"],
      "H·∫≠u Giang": ["TP. V·ªã Thanh", "TP. Ng√£ B·∫£y", "TX. Long M·ªπ", "Ch√¢u Th√†nh", "Ch√¢u Th√†nh A", "Long M·ªπ", "Ph·ª•ng Hi·ªáp", "V·ªã Thu·ª∑"],
      "H√≤a B√¨nh": ["TP. H√≤a B√¨nh", "Cao Phong", "ƒê√† B·∫Øc", "Kim B√¥i", "K·ª≥ S∆°n", "L·∫°c S∆°n", "L·∫°c Thu·ª∑", "L∆∞∆°ng S∆°n", "Mai Ch√¢u", "T√¢n L·∫°c", "Y√™n Thu·ª∑"],
      "H∆∞ng Y√™n": ["TP. H∆∞ng Y√™n", "√Çn Thi", "Kho√°i Ch√¢u", "Kim ƒê·ªông", "M·ªπ H√†o", "Ph√π C·ª´", "Ti√™n L·ªØ", "VƒÉn Giang", "VƒÉn L√¢m", "Y√™n M·ªπ"],
      "Kh√°nh H√≤a": ["TP. Nha Trang", "TP. Cam Ranh", "TX. Ninh H√≤a", "Cam L√¢m", "Di√™n Kh√°nh", "Kh√°nh S∆°n", "Kh√°nh Vƒ©nh", "Tr∆∞·ªùng Sa", "V·∫°n Ninh"],
      "Ki√™n Giang": ["TP. R·∫°ch Gi√°", "TP. H√† Ti√™n", "TX. Ki√™n L∆∞∆°ng", "An Bi√™n", "An Minh", "Ch√¢u Th√†nh", "Giang Th√†nh", "Gi·ªìng Ri·ªÅng", "G√≤ Quao", "H√≤n ƒê·∫•t", "Ki√™n H·∫£i", "Ph√∫ Qu·ªëc", "T√¢n Hi·ªáp", "U Minh Th∆∞·ª£ng", "Vƒ©nh Thu·∫≠n"],
      "Kon Tum": ["TP. Kon Tum", "ƒê·∫Øk Glei", "ƒê·∫Øk H√†", "ƒê·∫Øk T√¥", "Ia H' Drai", "Kon Pl√¥ng", "Kon R·∫´y", "Ng·ªçc H·ªìi", "Sa Th·∫ßy", "Tu M∆° R√¥ng"],
      "Lai Ch√¢u": ["TP. Lai Ch√¢u", "M∆∞·ªùng T√®", "N·∫≠m Nh√πn", "Phong Th·ªï", "S√¨n H·ªì", "Tam ƒê∆∞·ªùng", "T√¢n Uy√™n", "Than Uy√™n"],
      "L√¢m ƒê·ªìng": ["TP. ƒê√† L·∫°t", "TP. B·∫£o L·ªôc", "B·∫£o L√¢m", "C√°t Ti√™n", "ƒê·∫° Huoai", "ƒê·∫° T·∫ªh", "ƒêam R√¥ng", "Di Linh", "ƒê∆°n D∆∞∆°ng", "ƒê·ª©c Tr·ªçng", "L·∫°c D∆∞∆°ng", "L√¢m H√†"],
      "L·∫°ng S∆°n": ["TP. L·∫°ng S∆°n", "B·∫Øc S∆°n", "B√¨nh Gia", "Cao L·ªôc", "Chi LƒÉng", "ƒê√¨nh L·∫≠p", "H·ªØu L≈©ng", "L·ªôc B√¨nh", "Trang ƒê·ªãnh", "VƒÉn L√£ng", "VƒÉn Quan"],
      "L√†o Cai": ["TP. L√†o Cai", "B·∫Øc H√†", "B·∫£o Th·∫Øng", "B·∫£o Y√™n", "B√°t X√°t", "M∆∞·ªùng Kh∆∞∆°ng", "Sa Pa", "Si Ma Cai", "VƒÉn B√†n"],
      "Long An": ["TP. T√¢n An", "TX. Ki·∫øn T∆∞·ªùng", "B·∫øn L·ª©c", "C·∫ßn ƒê∆∞·ªõc", "C·∫ßn Giu·ªôc", "Ch√¢u Th√†nh", "ƒê·ª©c H√≤a", "ƒê·ª©c Hu·ªá", "M·ªôc H√≥a", "T√¢n H∆∞ng", "T√¢n Th·∫°nh", "T√¢n Tr·ª•", "Th·∫°nh H√≥a", "Th·ªß Th·ª´a", "Vƒ©nh H∆∞ng"],
      "Nam ƒê·ªãnh": ["TP. Nam ƒê·ªãnh", "Giao Thu·ª∑", "H·∫£i H·∫≠u", "M·ªπ L·ªôc", "Nam Tr·ª±c", "Nghƒ©a H∆∞ng", "Tr·ª±c Ninh", "V·ª• B·∫£n", "Xu√¢n Tr∆∞·ªùng", "√ù Y√™n"],
      "Ngh·ªá An": ["TP. Vinh", "TX. C·ª≠a L√≤", "TX. Th√°i Ho√†", "TX. Ho√†ng Mai", "Anh S∆°n", "Con Cu√¥ng", "Di·ªÖn Ch√¢u", "ƒê√¥ L∆∞∆°ng", "H∆∞ng Nguy√™n", "K·ª≥ S∆°n", "Nam ƒê√†n", "Nghƒ©a ƒê√†n", "Nghi L·ªôc", "Qu·∫ø Phong", "Qu·ª≥ Ch√¢u", "Qu·ª≥ H·ª£p", "Qu·ª≥nh L∆∞u", "T√¢n K·ª≥", "Thanh Ch∆∞∆°ng", "T∆∞∆°ng D∆∞∆°ng", "Y√™n Th√†nh"],
      "Ninh B√¨nh": ["TP. Ninh B√¨nh", "TP. Tam ƒêi·ªáp", "Gia Vi·ªÖn", "Hoa L∆∞", "Kim S∆°n", "Nho Quan", "Y√™n Kh√°nh", "Y√™n M√¥"],
      "Ninh Thu·∫≠n": ["TP. Phan Rang-Th√°p Ch√†m", "B√°c √Åi", "Ninh H·∫£i", "Ninh Ph∆∞·ªõc", "Ninh S∆°n", "Thu·∫≠n B·∫Øc", "Thu·∫≠n Nam"],
      "Ph√∫ Th·ªç": ["TP. Vi·ªát Tr√¨", "TX. Ph√∫ Th·ªç", "C·∫©m Kh√™", "ƒêoan H√πng", "H·∫° Ho√†", "L√¢m Thao", "Ph√π Ninh", "Tam N√¥ng", "T√¢n S∆°n", "Thanh Ba", "Thanh S∆°n", "Thanh Thu·ª∑", "Y√™n L·∫≠p"],
      "Ph√∫ Y√™n": ["TP. Tuy H√≤a", "TX. S√¥ng C·∫ßu", "ƒê√¥ng H√≤a", "ƒê·ªìng Xu√¢n", "Ph√∫ H√≤a", "S∆°n H√≤a", "S√¥ng Hinh", "T√¢y H√≤a", "Tuy An"],
      "Qu·∫£ng B√¨nh": ["TP. ƒê·ªìng H·ªõi", "TX. Ba ƒê·ªìn", "B·ªë Tr·∫°ch", "L·ªá Thu·ª∑", "Minh H√≥a", "Qu·∫£ng Ninh", "Qu·∫£ng Tr·∫°ch", "Tuy√™n H√≥a"],
      "Qu·∫£ng Nam": ["TP. Tam K·ª≥", "TP. H·ªôi An", "TX. ƒêi·ªán B√†n", "B·∫Øc Tr√† My", "ƒê·∫°i L·ªôc", "Duy Xuy√™n", "Hi·ªáp ƒê·ª©c", "Nam Giang", "Nam Tr√† My", "N√¥ng S∆°n", "N√∫i Th√†nh", "Ph√∫ Ninh", "Ph∆∞·ªõc S∆°n", "Qu·∫ø S∆°n", "T√¢y Giang", "ThƒÉng B√¨nh", "Ti√™n Ph∆∞·ªõc"],
      "Qu·∫£ng Ng√£i": ["TP. Qu·∫£ng Ng√£i", "B√¨nh S∆°n", "ƒê·ª©c Ph·ªï", "Ba T∆°", "L√Ω S∆°n", "Minh Long", "M·ªô ƒê·ª©c", "Nghƒ©a H√†nh", "S∆°n H√†", "S∆°n T√¢y", "S∆°n T·ªãnh", "T√¢y Tr√†", "Tr√† B·ªìng", "T∆∞ Nghƒ©a"],
      "Qu·∫£ng Ninh": ["TP. H·∫° Long", "TP. M√≥ng C√°i", "TP. C·∫©m Ph·∫£", "TP. U√¥ng B√≠", "TX. ƒê√¥ng Tri·ªÅu", "TX. Qu·∫£ng Y√™n", "Ba Ch·∫Ω", "B√¨nh Li√™u", "C√¥ T√¥", "ƒê·∫ßm H√†", "H·∫£i H√†", "Ho√†nh B·ªì", "Ti√™n Y√™n", "V√¢n ƒê·ªìn"],
      "Qu·∫£ng Tr·ªã": ["TP. ƒê√¥ng H√†", "TX. Qu·∫£ng Tr·ªã", "Cam L·ªô", "C·ªìn C·ªè", "ƒêa Kr√¥ng", "Gio Linh", "H·∫£i LƒÉng", "H∆∞·ªõng H√≥a", "Tri·ªáu Phong", "Vƒ©nh Linh"],
      "S√≥c TrƒÉng": ["TP. S√≥c TrƒÉng", "TX. Vƒ©nh Ch√¢u", "TX. Ng√£ NƒÉm", "Ch√¢u Th√†nh", "C√π Lao Dung", "K·∫ø S√°ch", "Long Ph√∫", "M·ªπ T√∫", "M·ªπ Xuy√™n", "Th·∫°nh Tr·ªã", "Tr·∫ßn ƒê·ªÅ"],
      "S∆°n La": ["TP. S∆°n La", "B·∫Øc Y√™n", "Mai S∆°n", "M·ªôc Ch√¢u", "M∆∞·ªùng La", "Ph√π Y√™n", "Qu·ª≥nh Nhai", "S√¥ng M√£", "S·ªëp C·ªôp", "Thu·∫≠n Ch√¢u", "V√¢n H·ªì", "Y√™n Ch√¢u"],
      "T√¢y Ninh": ["TP. T√¢y Ninh", "B·∫øn C·∫ßu", "Ch√¢u Th√†nh", "D∆∞∆°ng Minh Ch√¢u", "G√≤ D·∫ßu", "H√≤a Th√†nh", "T√¢n Bi√™n", "T√¢n Ch√¢u", "Tr·∫£ng B√†ng"],
      "Th√°i B√¨nh": ["TP. Th√°i B√¨nh", "ƒê√¥ng H∆∞ng", "H∆∞ng H√†", "Ki·∫øn X∆∞∆°ng", "Qu·ª≥nh Ph·ª•", "Th√°i Thu·ªµ", "Ti·ªÅn H·∫£i", "V≈© Th∆∞"],
      "Th√°i Nguy√™n": ["TP. Th√°i Nguy√™n", "TP. S√¥ng C√¥ng", "TX. Ph·ªï Y√™n", "ƒê·ªãnh H√≥a", "ƒê·∫°i T·ª´", "ƒê·ªìng H·ª∑", "Ph√∫ B√¨nh", "Ph√∫ L∆∞∆°ng", "V√µ Nhai"],
      "Thanh H√≥a": ["TP. Thanh H√≥a", "TP. S·∫ßm S∆°n", "TX. B·ªâm S∆°n", "B√° Th∆∞·ªõc", "C·∫©m Thu·ª∑", "ƒê√¥ng S∆°n", "H√† Trung", "H·∫≠u L·ªôc", "Ho·∫±ng H√≥a", "Lang Ch√°nh", "M∆∞·ªùng L√°t", "Nga S∆°n", "Ng·ªçc L·∫∑c", "Nh∆∞ Thanh", "Nh∆∞ Xu√¢n", "N√¥ng C·ªëng", "Quan H√≥a", "Quan S∆°n", "Qu·∫£ng X∆∞∆°ng", "Thi·ªáu H√≥a", "Th·ªç Xu√¢n", "Th∆∞·ªùng Xu√¢n", "Tƒ©nh Gia", "Tri·ªáu S∆°n", "Vƒ©nh L·ªôc", "Y√™n ƒê·ªãnh"],
      "TP. H·ªì Ch√≠ Minh": ["Qu·∫≠n 1", "Qu·∫≠n 3", "Qu·∫≠n 4", "Qu·∫≠n 5", "Qu·∫≠n 6", "Qu·∫≠n 7", "Qu·∫≠n 8", "Qu·∫≠n 10", "Qu·∫≠n 11", "Qu·∫≠n 12", "G√≤ V·∫•p", "T√¢n B√¨nh", "T√¢n Ph√∫", "B√¨nh Th·∫°nh", "Ph√∫ Nhu·∫≠n", "Th·ªß ƒê·ª©c", "B√¨nh T√¢n", "B√¨nh Ch√°nh", "C·∫ßn Gi·ªù", "C·ªß Chi", "H√≥c M√¥n", "Nh√† B√®"],
      "Th·ª´a Thi√™n Hu·∫ø": ["TP. Hu·∫ø", "TX. H∆∞∆°ng Th·ªßy", "TX. H∆∞∆°ng Tr√†", "A L∆∞·ªõi", "Nam ƒê√¥ng", "Phong ƒêi·ªÅn", "Ph√∫ L·ªôc", "Ph√∫ Vang", "Qu·∫£ng ƒêi·ªÅn"],
      "Ti·ªÅn Giang": ["TP. M·ªπ Tho", "TX. G√≤ C√¥ng", "TX. Cai L·∫≠y", "C√°i B√®", "Ch√¢u Th√†nh", "Ch·ª£ G·∫°o", "G√≤ C√¥ng ƒê√¥ng", "G√≤ C√¥ng T√¢y", "T√¢n Ph√∫ ƒê√¥ng", "T√¢n Ph∆∞·ªõc"],
      "Tr√† Vinh": ["TP. Tr√† Vinh", "C√†ng Long", "C·∫ßu K√®", "C·∫ßu Ngang", "Ch√¢u Th√†nh", "Duy√™n H·∫£i", "Ti·ªÉu C·∫ßn", "Tr√† C√∫"],
      "Tuy√™n Quang": ["TP. Tuy√™n Quang", "Chi√™m H√≥a", "H√†m Y√™n", "L√¢m B√¨nh", "Na Hang", "S∆°n D∆∞∆°ng", "Y√™n S∆°n"],
      "Vƒ©nh Long": ["TP. Vƒ©nh Long", "B√¨nh Minh", "B√¨nh T√¢n", "Long H·ªì", "Mang Th√≠t", "Tam B√¨nh", "Tr√† √în", "V≈©ng Li√™m"],
      "Vƒ©nh Ph√∫c": ["TP. Vƒ©nh Y√™n", "TP. Ph√∫c Y√™n", "B√¨nh Xuy√™n", "L·∫≠p Th·∫°ch", "S√¥ng L√¥", "Tam ƒê·∫£o", "Tam D∆∞∆°ng", "Vƒ©nh T∆∞·ªùng", "Y√™n L·∫°c"],
      "Y√™n B√°i": ["TP. Y√™n B√°i", "TX. Nghƒ©a L·ªô", "L·ª•c Y√™n", "M√π Cang Ch·∫£i", "Tr·∫°m T·∫•u", "Tr·∫•n Y√™n", "VƒÉn Ch·∫•n", "VƒÉn Y√™n", "Y√™n B√¨nh"]
    };

    // Check login
    const userStr = localStorage.getItem('user');
    if (!userStr) {
      window.location.href = '/Web/user/pages/login.html';
    } else {
      currentUser = JSON.parse(userStr);
      loadUserData();
      loadAddresses();
    }

    // Load user data
    async function loadUserData() {
      try {
        const response = await userAPI.getById(currentUser.user_id);
        const user = response.data || response;

        document.getElementById('profileName').textContent = user.full_name || user.username;
        document.getElementById('profileRole').textContent = user.role === 'admin' ? 'Qu·∫£n tr·ªã vi√™n' : user.role === 'pharmacist' ? 'D∆∞·ª£c sƒ©' : 'Kh√°ch h√†ng';
        
        document.getElementById('username').value = user.username || '';
        document.getElementById('fullName').value = user.full_name || '';
        document.getElementById('email').value = user.email || '';
        document.getElementById('phone').value = user.phone || '';
        document.getElementById('address').value = user.address || '';
      } catch (error) {
        console.error('Load user error:', error);
        notification.error('Kh√¥ng th·ªÉ t·∫£i th√¥ng tin ng∆∞·ªùi d√πng');
      }
    }

    window.loadUserData = loadUserData;

    // Update profile
    document.getElementById('profileForm').addEventListener('submit', async (e) => {
      e.preventDefault();

      const data = {
        full_name: document.getElementById('fullName').value.trim(),
        email: document.getElementById('email').value.trim(),
        phone: document.getElementById('phone').value.trim(),
        address: document.getElementById('address').value.trim(),
      };

      try {
        const response = await userAPI.update(currentUser.user_id, data);
        
        // Update localStorage
        const updatedUser = { ...currentUser, ...data };
        localStorage.setItem('user', JSON.stringify(updatedUser));
        currentUser = updatedUser;

        notification.success('C·∫≠p nh·∫≠t th√¥ng tin th√†nh c√¥ng!');
        loadUserData();
      } catch (error) {
        console.error('Update error:', error);
        notification.error(error.message || 'Kh√¥ng th·ªÉ c·∫≠p nh·∫≠t th√¥ng tin');
      }
    });

    // Change password
    document.getElementById('passwordForm').addEventListener('submit', async (e) => {
      e.preventDefault();

      const currentPassword = document.getElementById('currentPassword').value;
      const newPassword = document.getElementById('newPassword').value;
      const confirmPassword = document.getElementById('confirmPassword').value;

      if (newPassword !== confirmPassword) {
        notification.error('M·∫≠t kh·∫©u x√°c nh·∫≠n kh√¥ng kh·ªõp!');
        return;
      }

      if (newPassword.length < 6) {
        notification.error('M·∫≠t kh·∫©u m·ªõi ph·∫£i c√≥ √≠t nh·∫•t 6 k√Ω t·ª±!');
        return;
      }

      try {
        await userAPI.update(currentUser.user_id, {
          password: newPassword,
          currentPassword: currentPassword
        });

        notification.success('ƒê·ªïi m·∫≠t kh·∫©u th√†nh c√¥ng!');
        document.getElementById('passwordForm').reset();
      } catch (error) {
        console.error('Change password error:', error);
        notification.error(error.message || 'Kh√¥ng th·ªÉ ƒë·ªïi m·∫≠t kh·∫©u');
      }
    });

    // Tab switching
    document.querySelectorAll('[data-tab]').forEach(tab => {
      tab.addEventListener('click', (e) => {
        e.preventDefault();
        const tabName = tab.dataset.tab;

        // Update active menu
        document.querySelectorAll('[data-tab]').forEach(t => t.classList.remove('active'));
        tab.classList.add('active');

        // Show tab content
        document.querySelectorAll('.tab-content').forEach(content => {
          content.style.display = 'none';
        });
        document.getElementById('tab-' + tabName).style.display = 'block';
      });
    });

    // Address management
    function loadAddresses() {
      const savedAddresses = localStorage.getItem('user_addresses_' + currentUser.user_id);
      addresses = savedAddresses ? JSON.parse(savedAddresses) : [];
      renderAddresses();
    }

    function saveAddresses() {
      localStorage.setItem('user_addresses_' + currentUser.user_id, JSON.stringify(addresses));
    }

    function renderAddresses() {
      const container = document.getElementById('addressList');
      
      if (addresses.length === 0) {
        container.innerHTML = `
          <div class="empty-state">
            <i class='bx bx-map'></i>
            <p>Ch∆∞a c√≥ ƒë·ªãa ch·ªâ giao h√†ng</p>
          </div>
        `;
        return;
      }

      container.innerHTML = addresses.map(addr => `
        <div class="address-card ${addr.isDefault ? 'default' : ''}">
          ${addr.isDefault ? '<span class="address-badge">M·∫∑c ƒë·ªãnh</span>' : ''}
          <div class="address-info">
            <div class="address-name">${addr.fullName}</div>
            <div class="address-details">
              üìû ${addr.phone}<br>
              üìç ${addr.detail}, ${addr.district}, ${addr.city}
            </div>
          </div>
          <div class="address-actions">
            <button class="btn btn-small btn-edit" onclick="window.editAddress('${addr.id}')">
              <i class='bx bx-edit'></i> S·ª≠a
            </button>
            ${!addr.isDefault ? `
              <button class="btn btn-small btn-default" onclick="window.setDefaultAddress('${addr.id}')">
                <i class='bx bx-check'></i> ƒê·∫∑t m·∫∑c ƒë·ªãnh
              </button>
            ` : ''}
            <button class="btn btn-small btn-delete" onclick="window.deleteAddress('${addr.id}')">
              <i class='bx bx-trash'></i> X√≥a
            </button>
          </div>
        </div>
      `).join('');
    }

    window.openAddressModal = () => {
      editingAddressId = null;
      document.getElementById('addressModalTitle').innerHTML = '<i class="bx bx-map-pin"></i> Th√™m ƒë·ªãa ch·ªâ m·ªõi';
      document.getElementById('addressForm').reset();
      initAddressSelects();
      document.getElementById('addressModal').style.display = 'flex';
    };

    window.closeAddressModal = () => {
      document.getElementById('addressModal').style.display = 'none';
      editingAddressId = null;
    };

    // Initialize city and district selects
    function initAddressSelects() {
      const citySelect = document.getElementById('addrCity');
      const districtSelect = document.getElementById('addrDistrict');

      // Populate cities
      citySelect.innerHTML = '<option value="">-- Ch·ªçn t·ªânh/th√†nh --</option>';
      Object.keys(vietnamData).sort().forEach(city => {
        const option = document.createElement('option');
        option.value = city;
        option.textContent = city;
        citySelect.appendChild(option);
      });

      // City change handler
      citySelect.addEventListener('change', function() {
        const selectedCity = this.value;
        districtSelect.innerHTML = '<option value="">-- Ch·ªçn qu·∫≠n/huy·ªán --</option>';
        
        if (selectedCity && vietnamData[selectedCity]) {
          districtSelect.disabled = false;
          vietnamData[selectedCity].forEach(district => {
            const option = document.createElement('option');
            option.value = district;
            option.textContent = district;
            districtSelect.appendChild(option);
          });
        } else {
          districtSelect.disabled = true;
        }
      });
    }

    window.editAddress = (id) => {
      const addr = addresses.find(a => a.id === id);
      if (!addr) return;

      editingAddressId = id;
      document.getElementById('addressModalTitle').innerHTML = '<i class="bx bx-edit"></i> S·ª≠a ƒë·ªãa ch·ªâ';
      
      initAddressSelects();
      
      document.getElementById('addrFullName').value = addr.fullName;
      document.getElementById('addrPhone').value = addr.phone;
      document.getElementById('addrDetail').value = addr.detail;
      document.getElementById('addrCity').value = addr.city;
      
      // Trigger city change to load districts
      const cityChangeEvent = new Event('change');
      document.getElementById('addrCity').dispatchEvent(cityChangeEvent);
      
      // Wait a bit for districts to load, then set selected district
      setTimeout(() => {
        document.getElementById('addrDistrict').value = addr.district;
      }, 50);
      
      document.getElementById('addrIsDefault').checked = addr.isDefault;
      document.getElementById('addressModal').style.display = 'flex';
    };

    window.deleteAddress = (id) => {
      notification.confirm({
        title: 'X√°c nh·∫≠n x√≥a',
        message: 'B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a ƒë·ªãa ch·ªâ n√†y?',
        onConfirm: () => {
          addresses = addresses.filter(a => a.id !== id);
          saveAddresses();
          renderAddresses();
          notification.success('ƒê√£ x√≥a ƒë·ªãa ch·ªâ');
        }
      });
    };

    window.setDefaultAddress = (id) => {
      addresses = addresses.map(a => ({
        ...a,
        isDefault: a.id === id
      }));
      saveAddresses();
      renderAddresses();
      notification.success('ƒê√£ ƒë·∫∑t l√†m ƒë·ªãa ch·ªâ m·∫∑c ƒë·ªãnh');
    };

    document.getElementById('addressForm').addEventListener('submit', (e) => {
      e.preventDefault();

      const addressData = {
        id: editingAddressId || Date.now().toString(),
        fullName: document.getElementById('addrFullName').value.trim(),
        phone: document.getElementById('addrPhone').value.trim(),
        detail: document.getElementById('addrDetail').value.trim(),
        city: document.getElementById('addrCity').value.trim(),
        district: document.getElementById('addrDistrict').value.trim(),
        isDefault: document.getElementById('addrIsDefault').checked
      };

      if (editingAddressId) {
        // Update existing
        addresses = addresses.map(a => a.id === editingAddressId ? addressData : a);
      } else {
        // Add new
        if (addressData.isDefault) {
          addresses = addresses.map(a => ({ ...a, isDefault: false }));
        }
        addresses.push(addressData);
      }

      saveAddresses();
      renderAddresses();
      closeAddressModal();
      notification.success(editingAddressId ? 'C·∫≠p nh·∫≠t ƒë·ªãa ch·ªâ th√†nh c√¥ng!' : 'Th√™m ƒë·ªãa ch·ªâ th√†nh c√¥ng!');
    });

    // Modal backdrop click
    document.getElementById('addressModal').addEventListener('click', (e) => {
      if (e.target.id === 'addressModal') {
        closeAddressModal();
      }
    });
  </script>
</body>
</html>
